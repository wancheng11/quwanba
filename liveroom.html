<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Áõ¥Êí≠Èó¥</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #000;
            color: #fff;
            height: 100vh;
            overflow: hidden;
        }

        /* Áõ¥Êí≠ËßÜÈ¢ëÂå∫Âüü */
        .live-container {
            position: relative;
            width: 100%;
            height: 100vh;
            background: #000;
        }

        .live-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* È°∂ÈÉ®‰ø°ÊÅØÊ†è */
        .top-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            padding: 15px;
            display: flex;
            align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent);
            z-index: 100;
        }

        .back-btn {
            color: #fff;
            margin-right: 15px;
            cursor: pointer;
        }

        .anchor-info {
            display: flex;
            align-items: center;
            flex: 1;
        }

        .anchor-avatar {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            margin-right: 10px;
            border: 2px solid #fff;
        }

        .anchor-details {
            flex: 1;
        }

        .anchor-name {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .viewers-count {
            font-size: 12px;
            opacity: 0.8;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .follow-btn {
            background: rgba(255, 107, 107, 0.8);
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            color: white;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Â∫ïÈÉ®‰∫íÂä®Âå∫Âüü */
        .bottom-area {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 15px;
            background: linear-gradient(to top, rgba(0,0,0,0.5), transparent);
        }

        /* ËØÑËÆ∫ÂàóË°® */
        .comments-container {
            position: absolute;
            bottom: 70px;
            left: 0;
            right: 0;
            max-height: 50vh;
            overflow-y: auto;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .comment-item {
            background: rgba(0,0,0,0.3);
            padding: 8px 12px;
            border-radius: 20px;
            max-width: 80%;
            backdrop-filter: blur(5px);
        }

        .comment-user {
            color: #4D94FF;
            font-weight: 500;
            margin-right: 5px;
        }

        .comment-text {
            color: #fff;
        }

        /* Â∫ïÈÉ®ËæìÂÖ•Ê†è */
        .input-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(5px);
            border-radius: 25px;
        }

        .comment-input {
            flex: 1;
            background: rgba(255,255,255,0.2);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            color: #fff;
            font-size: 14px;
        }

        .comment-input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
        }

        .action-btn {
            background: none;
            border: none;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            font-size: 12px;
        }

        .action-btn .material-icons {
            font-size: 24px;
        }

        /* PKÁ≥ªÁªüÊ†∑Âºè */
        .pk-container {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 120px;
            display: none;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            background: rgba(0,0,0,0.5);
        }

        .pk-side {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pk-avatar {
            width: 60px;
            height: 60px;
            border-radius: 30px;
            border: 2px solid #fff;
        }

        .pk-info {
            color: white;
        }

        .pk-name {
            font-size: 16px;
            font-weight: 500;
        }

        .pk-score {
            font-size: 24px;
            font-weight: 600;
            color: #FFD700;
        }

        .pk-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: rgba(255,255,255,0.2);
        }

        .pk-bar-left, .pk-bar-right {
            position: absolute;
            height: 100%;
            transition: width 0.3s ease;
        }

        .pk-bar-left {
            left: 0;
            background: #FF6B6B;
        }

        .pk-bar-right {
            right: 0;
            background: #4D94FF;
        }

        /* ËßÇ‰ºóÂàóË°®Ê†∑Âºè */
        .viewer-list {
            position: absolute;
            top: 80px;
            right: 10px;
            background: rgba(0,0,0,0.5);
            border-radius: 20px;
            padding: 10px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .viewer-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 5px;
            color: white;
        }

        .viewer-avatar {
            width: 30px;
            height: 30px;
            border-radius: 15px;
        }

        .viewer-name {
            font-size: 12px;
        }

        /* Á§ºÁâ©ÁâπÊïàÊ†∑Âºè */
        .gift-effect {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: giftFloat 3s ease-out;
            pointer-events: none;
        }

        .gift-effect.luxury {
            animation: luxuryGift 3s ease-out;
        }

        @keyframes giftFloat {
            0% { transform: translate(-50%, 0); opacity: 0; }
            10% { transform: translate(-50%, -50%); opacity: 1; }
            90% { transform: translate(-50%, -200%); opacity: 1; }
            100% { transform: translate(-50%, -250%); opacity: 0; }
        }

        @keyframes luxuryGift {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            20% { transform: scale(1.2) rotate(360deg); opacity: 1; }
            40% { transform: scale(1) rotate(360deg); opacity: 1; }
            80% { transform: scale(1) rotate(360deg); opacity: 1; }
            100% { transform: scale(0) rotate(720deg); opacity: 0; }
        }

        /* Áõ¥Êí≠ÁªüËÆ°Èù¢Êùø */
        .stats-panel {
            position: absolute;
            top: 80px;
            left: 10px;
            background: rgba(0,0,0,0.5);
            border-radius: 20px;
            padding: 10px;
            color: white;
            font-size: 12px;
        }

        .stats-item {
            display: flex;
            align-items: center;
            gap: 5px;
            margin: 5px 0;
        }

        .stats-icon {
            color: #FFD700;
        }
    </style>
</head>
<body>
    <div class="live-container">
        <!-- Áõ¥Êí≠ËßÜÈ¢ë -->
        <video class="live-video" autoplay muted loop>
            <source src="path_to_your_video.mp4" type="video/mp4">
        </video>

        <!-- È°∂ÈÉ®‰ø°ÊÅØÊ†è -->
        <div class="top-bar">
            <i class="material-icons back-btn" onclick="window.location.href='yulezhibo.html'">arrow_back</i>
            <div class="anchor-info">
                <img class="anchor-avatar" src="" alt="‰∏ªÊí≠Â§¥ÂÉè">
                <div class="anchor-details">
                    <div class="anchor-name"></div>
                    <div class="viewers-count">
                        <i class="material-icons">visibility</i>
                        <span></span>
                    </div>
                </div>
            </div>
            <button class="follow-btn">
                <i class="material-icons">add</i>
                <span>ÂÖ≥Ê≥®</span>
            </button>
        </div>

        <!-- ËØÑËÆ∫Âå∫ -->
        <div class="comments-container" id="commentsContainer"></div>

        <!-- Â∫ïÈÉ®Êìç‰ΩúÂå∫ -->
        <div class="bottom-area">
            <div class="input-bar">
                <input type="text" class="comment-input" placeholder="ËØ¥ÁÇπ‰ªÄ‰πà...">
                <div class="action-buttons">
                    <button class="action-btn">
                        <i class="material-icons">card_giftcard</i>
                        <span>Á§ºÁâ©</span>
                    </button>
                    <button class="action-btn">
                        <i class="material-icons">favorite</i>
                        <span>ÁÇπËµû</span>
                    </button>
                    <button class="action-btn">
                        <i class="material-icons">share</i>
                        <span>ÂàÜ‰∫´</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- PKÁ≥ªÁªü -->
        <div class="pk-container" id="pkContainer">
            <div class="pk-side">
                <img class="pk-avatar" src="" alt="‰∏ªÊí≠Â§¥ÂÉè" id="hostAvatar">
                <div class="pk-info">
                    <div class="pk-name" id="hostName"></div>
                    <div class="pk-score" id="hostScore">0</div>
                </div>
            </div>
            <div class="pk-side">
                <div class="pk-info">
                    <div class="pk-name" id="challengerName"></div>
                    <div class="pk-score" id="challengerScore">0</div>
                </div>
                <img class="pk-avatar" src="" alt="ÂØπÊâãÂ§¥ÂÉè" id="challengerAvatar">
            </div>
            <div class="pk-progress">
                <div class="pk-bar-left" id="pkBarLeft"></div>
                <div class="pk-bar-right" id="pkBarRight"></div>
            </div>
        </div>

        <!-- ËßÇ‰ºóÂàóË°® -->
        <div class="viewer-list" id="viewerList"></div>

        <!-- Áõ¥Êí≠ÁªüËÆ° -->
        <div class="stats-panel">
            <div class="stats-item">
                <i class="material-icons stats-icon">favorite</i>
                <span id="likeCount">0</span>
            </div>
            <div class="stats-item">
                <i class="material-icons stats-icon">card_giftcard</i>
                <span id="giftCount">0</span>
            </div>
            <div class="stats-item">
                <i class="material-icons stats-icon">people</i>
                <span id="viewerCount">0</span>
            </div>
        </div>
    </div>

    <script>
        // Ê®°ÊãüËØÑËÆ∫Êï∞ÊçÆ
        const mockComments = [
            { user: 'Â∞èÂèØÁà±', text: '‰∏ªÊí≠Â•ΩÂéâÂÆ≥ÔºÅ' },
            { user: 'Âø´‰πêÊòüÁêÉ', text: '666666' },
            { user: 'Èò≥ÂÖâÁî∑Â≠©', text: '‰∏ªÊí≠Áé©ÂæóÁúüÂ•Ω' },
            { user: 'ÁîúÂøÉÂÆùË¥ù', text: '‰∏ªÊí≠Â£∞Èü≥ÁúüÂ•ΩÂê¨' }
        ];

        // Ê£ÄÊü•ÊòØÂê¶ÊòØ‰ªéÊ≠£Á°ÆÈ°µÈù¢ËøõÂÖ•
        document.addEventListener('DOMContentLoaded', function() {
            // Ëé∑Âèñ‰∏ä‰∏Ä‰∏™È°µÈù¢ÁöÑURL
            const previousPage = document.referrer;
            
            // Â¶ÇÊûú‰∏çÊòØ‰ªéyulezhibo.htmlËøõÂÖ•ÔºåÂàôÈáçÂÆöÂêëÂà∞È¶ñÈ°µ
            if (!previousPage.includes('yulezhibo.html')) {
                window.location.href = 'quwanxingqiu.html';
                return;
            }

            // Ëé∑Âèñ‰∏ªÊí≠‰ø°ÊÅØ
            const anchorInfo = JSON.parse(localStorage.getItem('currentAnchor'));
            if (!anchorInfo) {
                // Â¶ÇÊûúÊ≤°Êúâ‰∏ªÊí≠‰ø°ÊÅØÔºå‰πüÈáçÂÆöÂêëÂà∞È¶ñÈ°µ
                window.location.href = 'quwanxingqiu.html';
                return;
            }

            // Ê≠£Â∏∏ÂàùÂßãÂåñÁõ¥Êí≠Èó¥...
            initLiveRoom();
        });

        function initLiveRoom() {
            // Ëé∑Âèñ‰∏ªÊí≠‰ø°ÊÅØ
            const anchorInfo = JSON.parse(localStorage.getItem('currentAnchor'));
            if (anchorInfo) {
                // Êõ¥Êñ∞‰∏ªÊí≠‰ø°ÊÅØ
                document.querySelector('.anchor-name').textContent = anchorInfo.name;
                document.querySelector('.anchor-avatar').src = anchorInfo.avatar;
                document.querySelector('.viewers-count span').textContent = anchorInfo.viewers;
            }

            // ÂàùÂßãÂåñËØÑËÆ∫Âå∫
            initComments();

            // Ê∑ªÂä†ËØÑËÆ∫ËæìÂÖ•‰∫ã‰ª∂ÁõëÂê¨
            const commentInput = document.querySelector('.comment-input');
            if (commentInput) {
                commentInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const text = this.value.trim();
                        if (text) {
                            addComment('Êàë', text);
                            this.value = '';
                        }
                    }
                });
            }

            // Ê∑ªÂä†Á§ºÁâ©ÊåâÈíÆ‰∫ã‰ª∂
            const giftBtn = document.querySelector('.action-btn:nth-child(1)');
            if (giftBtn) {
                giftBtn.addEventListener('click', showGiftPanel);
            }

            // Ê∑ªÂä†ÁÇπËµûÊåâÈíÆ‰∫ã‰ª∂
            const likeBtn = document.querySelector('.action-btn:nth-child(2)');
            if (likeBtn) {
                likeBtn.addEventListener('click', addLike);
            }

            // Ê∑ªÂä†ÂàÜ‰∫´ÊåâÈíÆ‰∫ã‰ª∂
            const shareBtn = document.querySelector('.action-btn:nth-child(3)');
            if (shareBtn) {
                shareBtn.addEventListener('click', shareStream);
            }

            // Ê∑ªÂä†ÂÖ≥Ê≥®ÊåâÈíÆ‰∫ã‰ª∂
            const followBtn = document.querySelector('.follow-btn');
            if (followBtn) {
                followBtn.addEventListener('click', toggleFollow);
            }

            // Ê®°ÊãüÂÆûÊó∂ËØÑËÆ∫
            setInterval(() => {
                const randomComment = mockComments[Math.floor(Math.random() * mockComments.length)];
                addComment(randomComment.user, randomComment.text);
            }, 3000);
        }

        // Ê∑ªÂä†ËØÑËÆ∫
        function addComment(user, text) {
            const container = document.getElementById('commentsContainer');
            if (!container) return;

            const comment = document.createElement('div');
            comment.className = 'comment-item';
            comment.innerHTML = `
                <span class="comment-user">${user}:</span>
                <span class="comment-text">${text}</span>
            `;
            container.appendChild(comment);
            container.scrollTop = container.scrollHeight;
        }

        // ÊòæÁ§∫Á§ºÁâ©Èù¢Êùø
        function showGiftPanel() {
            const panel = document.createElement('div');
            panel.className = 'gift-panel';
            panel.innerHTML = `
                <div class="gift-header">
                    <h3>ÈÄÅÁ§ºÁâ©</h3>
                    <i class="material-icons" onclick="this.parentElement.parentElement.remove()">close</i>
                </div>
                <div class="gift-grid">
                    <div class="gift-item" onclick="sendGift('Â∞èÂøÉÂøÉ', 1)">
                        <div class="gift-icon">‚ù§Ô∏è</div>
                        <div class="gift-name">Â∞èÂøÉÂøÉ</div>
                        <div class="gift-price">1Â∏Å</div>
                    </div>
                    <div class="gift-item" onclick="sendGift('Â∞èËä±Ëä±', 5)">
                        <div class="gift-icon">üå∏</div>
                        <div class="gift-name">Â∞èËä±Ëä±</div>
                        <div class="gift-price">5Â∏Å</div>
                    </div>
                    <div class="gift-item" onclick="sendGift('Â∞èÊòüÊòü', 10)">
                        <div class="gift-icon">‚≠ê</div>
                        <div class="gift-name">Â∞èÊòüÊòü</div>
                        <div class="gift-price">10Â∏Å</div>
                    </div>
                    <div class="gift-item" onclick="sendGift('ÁöáÂÜ†', 100)">
                        <div class="gift-icon">üëë</div>
                        <div class="gift-name">ÁöáÂÜ†</div>
                        <div class="gift-price">100Â∏Å</div>
                    </div>
                </div>
            `;
            document.body.appendChild(panel);
        }

        // ÂèëÈÄÅÁ§ºÁâ©
        function sendGift(giftName, price) {
            // ÂàõÂª∫Á§ºÁâ©Âä®Áîª
            const giftAnim = document.createElement('div');
            giftAnim.className = 'gift-animation';
            giftAnim.innerHTML = `
                <div class="gift-icon">${getGiftIcon(giftName)}</div>
                <div class="gift-info">
                    <span class="gift-sender">Êàë</span>
                    <span>ÈÄÅÂá∫‰∫Ü</span>
                    <span class="gift-name">${giftName}</span>
                </div>
            `;

            document.querySelector('.live-container').appendChild(giftAnim);
            setTimeout(() => giftAnim.remove(), 3000);

            // Ê∑ªÂä†ËØÑËÆ∫ÊèêÁ§∫
            addComment('Á≥ªÁªü', `ÊàëÈÄÅÂá∫‰∫Ü${giftName}`);
        }

        // Ëé∑ÂèñÁ§ºÁâ©ÂõæÊ†á
        function getGiftIcon(giftName) {
            const icons = {
                'Â∞èÂøÉÂøÉ': '‚ù§Ô∏è',
                'Â∞èËä±Ëä±': 'üå∏',
                'Â∞èÊòüÊòü': '‚≠ê',
                'ÁöáÂÜ†': 'üëë'
            };
            return icons[giftName] || 'üéÅ';
        }

        // ÁÇπËµûÂäüËÉΩ
        function addLike() {
            const likeIcon = document.createElement('div');
            likeIcon.className = 'like-icon';
            likeIcon.innerHTML = '‚ù§Ô∏è';
            likeIcon.style.cssText = `
                position: absolute;
                bottom: 100px;
                right: ${50 + Math.random() * 50}px;
                animation: likeFloat 2s ease-out;
                font-size: 24px;
            `;

            document.querySelector('.live-container').appendChild(likeIcon);
            setTimeout(() => likeIcon.remove(), 2000);
        }

        // ÂàÜ‰∫´ÂäüËÉΩ
        function shareStream() {
            alert('ÂàÜ‰∫´ÂäüËÉΩÂºÄÂèë‰∏≠...');
        }

        // ÂÖ≥Ê≥®ÂäüËÉΩ
        function toggleFollow() {
            const followBtn = document.querySelector('.follow-btn');
            const isFollowed = followBtn.classList.contains('followed');
            
            if (isFollowed) {
                followBtn.classList.remove('followed');
                followBtn.innerHTML = '<i class="material-icons">add</i><span>ÂÖ≥Ê≥®</span>';
                showMessage('Â∑≤ÂèñÊ∂àÂÖ≥Ê≥®');
            } else {
                followBtn.classList.add('followed');
                followBtn.innerHTML = '<i class="material-icons">done</i><span>Â∑≤ÂÖ≥Ê≥®</span>';
                showMessage('ÂÖ≥Ê≥®ÊàêÂäü');
            }
        }

        // ÊòæÁ§∫Ê∂àÊÅØÊèêÁ§∫
        function showMessage(text) {
            const message = document.createElement('div');
            message.className = 'message-tip';
            message.textContent = text;
            document.body.appendChild(message);
            setTimeout(() => message.remove(), 2000);
        }

        // ËøîÂõûÊåâÈíÆ‰∫ã‰ª∂
        document.querySelector('.back-btn').addEventListener('click', () => {
            window.location.href = 'yulezhibo.html';
        });
    </script>
</body>
</html> 